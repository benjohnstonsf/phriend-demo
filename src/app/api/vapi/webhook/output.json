🎵 Received 200 audio chunks, latest size: 3840 bytes, total: 764248 bytes
🔥 WEBHOOK RECEIVED: 2025-06-09T03:25:57.249Z
🔥 Raw payload keys: [ 'message' ]
🔥 Extracted event type: conversation-update
🔥 NODE_ENV: development
🔥 isDevelopment: true
🎯 Vapi Webhook Event: {
  type: 'conversation-update',
  callId: 'fc4b1428-3b49-40cd-923a-edc38a6d9b34',
  timestamp: '2025-06-09T03:25:57.249Z'
}
💬 Conversation update: { messageCount: 2, timestamp: '2025-06-09T03:25:57.249Z' }
📝 Added assistant message to transcript: Hi there. I'm here to listen. Something told me you needed to make this call today.
 POST /api/vapi/webhook 200 in 25ms
🎵 Received 300 audio chunks, latest size: 3840 bytes, total: 1148248 bytes
🔥 WEBHOOK RECEIVED: 2025-06-09T03:25:59.109Z
🔥 Raw payload keys: [ 'message' ]
🔥 Extracted event type: conversation-update
🔥 NODE_ENV: development
🔥 isDevelopment: true
🎯 Vapi Webhook Event: {
  type: 'conversation-update',
  callId: 'fc4b1428-3b49-40cd-923a-edc38a6d9b34',
  timestamp: '2025-06-09T03:25:59.109Z'
}
💬 Conversation update: { messageCount: 2, timestamp: '2025-06-09T03:25:59.109Z' }
📝 Added assistant message to transcript: Hi there. I'm here to listen. Something told me you needed to make this call today. What's your name
 POST /api/vapi/webhook 200 in 18ms
🎵 Received 400 audio chunks, latest size: 3840 bytes, total: 1532248 bytes
🔥 WEBHOOK RECEIVED: 2025-06-09T03:26:01.304Z
🔥 Raw payload keys: [ 'message' ]
🔥 Extracted event type: speech-update
🔥 NODE_ENV: development
🔥 isDevelopment: true
🎯 Vapi Webhook Event: {
  type: 'speech-update',
  callId: 'fc4b1428-3b49-40cd-923a-edc38a6d9b34',
  timestamp: '2025-06-09T03:26:01.305Z'
}
🎤 Speech update: {
  role: 'assistant',
  status: 'stopped',
  timestamp: '2025-06-09T03:26:01.305Z'
}
 POST /api/vapi/webhook 200 in 19ms
🎵 Received 500 audio chunks, latest size: 3840 bytes, total: 1916248 bytes
🎵 Audio progress: 500 chunks, 1916248 bytes 
🔥 WEBHOOK RECEIVED: 2025-06-09T03:26:01.409Z
🔥 Raw payload keys: [ 'message' ]
🔥 Extracted event type: conversation-update
🔥 NODE_ENV: development
🔥 isDevelopment: true
🎯 Vapi Webhook Event: {
  type: 'conversation-update',
  callId: 'fc4b1428-3b49-40cd-923a-edc38a6d9b34',
  timestamp: '2025-06-09T03:26:01.409Z'
}
💬 Conversation update: { messageCount: 2, timestamp: '2025-06-09T03:26:01.409Z' }
📝 Added assistant message to transcript: Hi there. I'm here to listen. Something told me you needed to make this call today. What's your name
📊 Transcript progress: 5 messages collected for Future Self
 POST /api/vapi/webhook 200 in 18ms
🔥 WEBHOOK RECEIVED: 2025-06-09T03:26:03.341Z
🔥 Raw payload keys: [ 'message' ]
🔥 Extracted event type: speech-update
🔥 NODE_ENV: development
🔥 isDevelopment: true
🎯 Vapi Webhook Event: {
  type: 'speech-update',
  callId: 'fc4b1428-3b49-40cd-923a-edc38a6d9b34',
  timestamp: '2025-06-09T03:26:03.342Z'
}
🎤 Speech update: {
  role: 'user',
  status: 'started',
  timestamp: '2025-06-09T03:26:03.342Z'
}
 POST /api/vapi/webhook 200 in 17ms
🎵 Received 600 audio chunks, latest size: 3840 bytes, total: 2300248 bytes
🔥 WEBHOOK RECEIVED: 2025-06-09T03:26:05.286Z
🔥 Raw payload keys: [ 'message' ]
🔥 Extracted event type: speech-update
🔥 NODE_ENV: development
🔥 isDevelopment: true
🎯 Vapi Webhook Event: {
  type: 'speech-update',
  callId: 'fc4b1428-3b49-40cd-923a-edc38a6d9b34',
  timestamp: '2025-06-09T03:26:05.286Z'
}
🎤 Speech update: {
  role: 'user',
  status: 'stopped',
  timestamp: '2025-06-09T03:26:05.286Z'
}
 POST /api/vapi/webhook 200 in 17ms
🎵 Received 700 audio chunks, latest size: 3840 bytes, total: 2684248 bytes
🔥 WEBHOOK RECEIVED: 2025-06-09T03:26:05.782Z
🔥 Raw payload keys: [ 'message' ]
🔥 Extracted event type: speech-update
🔥 NODE_ENV: development
🔥 isDevelopment: true
🎯 Vapi Webhook Event: {
  type: 'speech-update',
  callId: 'fc4b1428-3b49-40cd-923a-edc38a6d9b34',
  timestamp: '2025-06-09T03:26:05.782Z'
}
🎤 Speech update: {
  role: 'user',
  status: 'started',
  timestamp: '2025-06-09T03:26:05.782Z'
}
 POST /api/vapi/webhook 200 in 26ms
🔥 WEBHOOK RECEIVED: 2025-06-09T03:26:06.323Z
🔥 Raw payload keys: [ 'message' ]
🔥 Extracted event type: conversation-update
🔥 NODE_ENV: development
🔥 isDevelopment: true
🎯 Vapi Webhook Event: {
  type: 'conversation-update',
  callId: 'fc4b1428-3b49-40cd-923a-edc38a6d9b34',
  timestamp: '2025-06-09T03:26:06.323Z'
}
💬 Conversation update: { messageCount: 3, timestamp: '2025-06-09T03:26:06.323Z' }
📝 Added user message to transcript: My name is Curly, and I've been
👤 Captured user name from conversation: Curly
 POST /api/vapi/webhook 200 in 17ms
🔥 WEBHOOK RECEIVED: 2025-06-09T03:26:06.472Z
🔥 Raw payload keys: [ 'message' ]
🔥 Extracted event type: speech-update
🔥 NODE_ENV: development
🔥 isDevelopment: true
🎯 Vapi Webhook Event: {
  type: 'speech-update',
  callId: 'fc4b1428-3b49-40cd-923a-edc38a6d9b34',
  timestamp: '2025-06-09T03:26:06.473Z'
}
🎤 Speech update: {
  role: 'user',
  status: 'stopped',
  timestamp: '2025-06-09T03:26:06.473Z'
}
 POST /api/vapi/webhook 200 in 24ms
🔥 WEBHOOK RECEIVED: 2025-06-09T03:26:07.253Z
🔥 Raw payload keys: [ 'message' ]
🔥 Extracted event type: speech-update
🔥 NODE_ENV: development
🔥 isDevelopment: true
🎯 Vapi Webhook Event: {
  type: 'speech-update',
  callId: 'fc4b1428-3b49-40cd-923a-edc38a6d9b34',
  timestamp: '2025-06-09T03:26:07.254Z'
}
🎤 Speech update: {
  role: 'user',
  status: 'started',
  timestamp: '2025-06-09T03:26:07.254Z'
}
 POST /api/vapi/webhook 200 in 20ms
🎵 Received 800 audio chunks, latest size: 3840 bytes, total: 3068248 bytes
🔥 WEBHOOK RECEIVED: 2025-06-09T03:26:08.063Z
🔥 Raw payload keys: [ 'message' ]
🔥 Extracted event type: speech-update
🔥 NODE_ENV: development
🔥 isDevelopment: true
🎯 Vapi Webhook Event: {
  type: 'speech-update',
  callId: 'fc4b1428-3b49-40cd-923a-edc38a6d9b34',
  timestamp: '2025-06-09T03:26:08.063Z'
}
🎤 Speech update: {
  role: 'user',
  status: 'stopped',
  timestamp: '2025-06-09T03:26:08.063Z'
}
 POST /api/vapi/webhook 200 in 17ms
🔥 WEBHOOK RECEIVED: 2025-06-09T03:26:09.053Z
🔥 Raw payload keys: [ 'message' ]
🔥 Extracted event type: speech-update
🔥 NODE_ENV: development
🔥 isDevelopment: true
🎯 Vapi Webhook Event: {
  type: 'speech-update',
  callId: 'fc4b1428-3b49-40cd-923a-edc38a6d9b34',
  timestamp: '2025-06-09T03:26:09.053Z'
}
🎤 Speech update: {
  role: 'user',
  status: 'started',
  timestamp: '2025-06-09T03:26:09.053Z'
}
 POST /api/vapi/webhook 200 in 20ms
🎵 Received 900 audio chunks, latest size: 3840 bytes, total: 3452248 bytes
🔥 WEBHOOK RECEIVED: 2025-06-09T03:26:10.205Z
🔥 Raw payload keys: [ 'message' ]
🔥 Extracted event type: conversation-update
🔥 NODE_ENV: development
🔥 isDevelopment: true
🎯 Vapi Webhook Event: {
  type: 'conversation-update',
  callId: 'fc4b1428-3b49-40cd-923a-edc38a6d9b34',
  timestamp: '2025-06-09T03:26:10.205Z'
}
💬 Conversation update: { messageCount: 3, timestamp: '2025-06-09T03:26:10.205Z' }
📝 Added user message to transcript: My name is Curly, and I've been absolutely terrified of things going wrong in my life.
📋 Captured problem description from conversation 
 POST /api/vapi/webhook 200 in 15ms
🔥 WEBHOOK RECEIVED: 2025-06-09T03:26:10.321Z
🔥 Raw payload keys: [ 'message' ]
🔥 Extracted event type: speech-update
🔥 NODE_ENV: development
🔥 isDevelopment: true
🎯 Vapi Webhook Event: {
  type: 'speech-update',
  callId: 'fc4b1428-3b49-40cd-923a-edc38a6d9b34',
  timestamp: '2025-06-09T03:26:10.321Z'
}
🎤 Speech update: {
  role: 'user',
  status: 'stopped',
  timestamp: '2025-06-09T03:26:10.321Z'
}
 POST /api/vapi/webhook 200 in 16ms
🔥 WEBHOOK RECEIVED: 2025-06-09T03:26:10.844Z
🔥 Raw payload keys: [ 'message' ]
🔥 Extracted event type: speech-update
🔥 NODE_ENV: development
🔥 isDevelopment: true
🎯 Vapi Webhook Event: {
  type: 'speech-update',
  callId: 'fc4b1428-3b49-40cd-923a-edc38a6d9b34',
  timestamp: '2025-06-09T03:26:10.844Z'
}
🎤 Speech update: {
  role: 'user',
  status: 'started',
  timestamp: '2025-06-09T03:26:10.844Z'
}
 POST /api/vapi/webhook 200 in 18ms
🎵 Received 1000 audio chunks, latest size: 3840 bytes, total: 3836248 bytes
🎵 Audio progress: 1000 chunks, 3836248 bytes 
🎵 Received 1100 audio chunks, latest size: 3840 bytes, total: 4220248 bytes
🔥 WEBHOOK RECEIVED: 2025-06-09T03:26:14.630Z
🔥 Raw payload keys: [ 'message' ]
🔥 Extracted event type: speech-update
🔥 NODE_ENV: development
🔥 isDevelopment: true
🎯 Vapi Webhook Event: {
  type: 'speech-update',
  callId: 'fc4b1428-3b49-40cd-923a-edc38a6d9b34',
  timestamp: '2025-06-09T03:26:14.631Z'
}
🎤 Speech update: {
  role: 'user',
  status: 'stopped',
  timestamp: '2025-06-09T03:26:14.631Z'
}
 POST /api/vapi/webhook 200 in 21ms
🔥 WEBHOOK RECEIVED: 2025-06-09T03:26:14.985Z
🔥 Raw payload keys: [ 'message' ]
🔥 Extracted event type: speech-update
🔥 NODE_ENV: development
🔥 isDevelopment: true
🎯 Vapi Webhook Event: {
  type: 'speech-update',
  callId: 'fc4b1428-3b49-40cd-923a-edc38a6d9b34',
  timestamp: '2025-06-09T03:26:14.985Z'
}
🎤 Speech update: {
  role: 'user',
  status: 'started',
  timestamp: '2025-06-09T03:26:14.985Z'
}
 POST /api/vapi/webhook 200 in 19ms
🔥 WEBHOOK RECEIVED: 2025-06-09T03:26:15.191Z
🔥 Raw payload keys: [ 'message' ]
🔥 Extracted event type: conversation-update
🔥 NODE_ENV: development
🔥 isDevelopment: true
🎯 Vapi Webhook Event: {
  type: 'conversation-update',
  callId: 'fc4b1428-3b49-40cd-923a-edc38a6d9b34',
  timestamp: '2025-06-09T03:26:15.191Z'
}
💬 Conversation update: { messageCount: 3, timestamp: '2025-06-09T03:26:15.191Z' }
📝 Added user message to transcript: My name is Curly, and I've been absolutely terrified of things going wrong in my life. Ever since I 
 POST /api/vapi/webhook 200 in 30ms
🎵 Received 1200 audio chunks, latest size: 3840 bytes, total: 4604248 bytes
🔥 WEBHOOK RECEIVED: 2025-06-09T03:26:16.547Z
🔥 Raw payload keys: [ 'message' ]
🔥 Extracted event type: conversation-update
🔥 NODE_ENV: development
🔥 isDevelopment: true
🎯 Vapi Webhook Event: {
  type: 'conversation-update',
  callId: 'fc4b1428-3b49-40cd-923a-edc38a6d9b34',
  timestamp: '2025-06-09T03:26:16.547Z'
}
💬 Conversation update: { messageCount: 3, timestamp: '2025-06-09T03:26:16.547Z' }
📝 Added user message to transcript: My name is Curly, and I've been absolutely terrified of things going wrong in my life. Ever since I 
 POST /api/vapi/webhook 200 in 18ms
🔥 WEBHOOK RECEIVED: 2025-06-09T03:26:16.686Z
🔥 Raw payload keys: [ 'message' ]
🔥 Extracted event type: speech-update
🔥 NODE_ENV: development
🔥 isDevelopment: true
🎯 Vapi Webhook Event: {
  type: 'speech-update',
  callId: 'fc4b1428-3b49-40cd-923a-edc38a6d9b34',
  timestamp: '2025-06-09T03:26:16.686Z'
}
🎤 Speech update: {
  role: 'user',
  status: 'stopped',
  timestamp: '2025-06-09T03:26:16.686Z'
}
 POST /api/vapi/webhook 200 in 21ms
🎵 Received 1300 audio chunks, latest size: 3840 bytes, total: 4988248 bytes
🎵 Received 1400 audio chunks, latest size: 3840 bytes, total: 5372248 bytes
🔥 WEBHOOK RECEIVED: 2025-06-09T03:26:19.968Z
🔥 Raw payload keys: [ 'message' ]
🔥 Extracted event type: speech-update
🔥 NODE_ENV: development
🔥 isDevelopment: true
🎯 Vapi Webhook Event: {
  type: 'speech-update',
  callId: 'fc4b1428-3b49-40cd-923a-edc38a6d9b34',
  timestamp: '2025-06-09T03:26:19.969Z'
}
🎤 Speech update: {
  role: 'assistant',
  status: 'started',
  timestamp: '2025-06-09T03:26:19.969Z'
}
 POST /api/vapi/webhook 200 in 19ms
🔥 WEBHOOK RECEIVED: 2025-06-09T03:26:20.072Z
🔥 Raw payload keys: [ 'message' ]
🔥 Extracted event type: speech-update
🔥 NODE_ENV: development
🔥 isDevelopment: true
🎯 Vapi Webhook Event: {
  type: 'speech-update',
  callId: 'fc4b1428-3b49-40cd-923a-edc38a6d9b34',
  timestamp: '2025-06-09T03:26:20.073Z'
}
🎤 Speech update: {
  role: 'assistant',
  status: 'stopped',
  timestamp: '2025-06-09T03:26:20.073Z'
}
 POST /api/vapi/webhook 200 in 24ms
🔥 WEBHOOK RECEIVED: 2025-06-09T03:26:20.083Z
🔥 Raw payload keys: [ 'message' ]
🔥 Extracted event type: speech-update
🔥 NODE_ENV: development
🔥 isDevelopment: true
🎯 Vapi Webhook Event: {
  type: 'speech-update',
  callId: 'fc4b1428-3b49-40cd-923a-edc38a6d9b34',
  timestamp: '2025-06-09T03:26:20.083Z'
}
🎤 Speech update: {
  role: 'assistant',
  status: 'started',
  timestamp: '2025-06-09T03:26:20.083Z'
}
 POST /api/vapi/webhook 200 in 25ms
⏰ 30 seconds elapsed - checking if Future Self needs to be created...
🔄 Creating Future Self with fallback (voice clone may not be ready)...
🎭 Creating Future Self assistant...
📊 Session state: voiceClone=false, transcripts=9
⚠️ Voice clone not ready yet, waiting for completion...
🎵 Received 1500 audio chunks, latest size: 3840 bytes, total: 5756248 bytes
🎵 Audio progress: 1500 chunks, 5756248 bytes 
🎭 30 seconds of audio captured! Triggering real-time voice cloning...
🎙️ Starting real-time voice cloning...
📦 Extracted user audio: 1920000 bytes from 1000 chunks
🎵 Using detected sample rate: 48000Hz
🎭 Real-time voice cloning triggered!
📊 Audio stats: 1000 chunks, 1920000 bytes, 30s
📤 Sending audio to real-time cloning API...
🎭 Starting real-time voice cloning with PlayHT...
🔑 Environment check:
  - NODE_ENV: development
  - User ID exists: true
  - Secret key exists: true
  - User ID preview: SoA1fGJz...
🎭 Starting real-time voice cloning for call fc4b1428-3b49-40cd-923a-edc38a6d9b34...
📊 Audio blob size: 1920044 bytes
📊 Audio blob type: audio/wav
💾 Saving backup audio file locally...
✅ Backup audio file saved to: /Users/benjaminjohnston/workspace/phriend-demo/audio_exports/voice_fc4b1428-3b49-40cd-923a-edc38a6d9b34_User_1749439581525.wav
📤 Sending audio to PlayHT for instant cloning...
🔧 FormData prepared with: {
  voice_name: 'fc4b1428-3b49-40cd-923a-edc38a6d9b34',
  fileName: 'voice_fc4b1428-3b49-40cd-923a-edc38a6d9b34_User_1749439581525.wav',
  audioSize: 1920044,
  audioType: 'audio/wav'
}
🌐 Making request to PlayHT...
🌐 URL: https://api.play.ht/api/v2/cloned-voices/instant
⏰ Setting 60-second timeout for fetch request...
🔍 Request details:
  URL: https://api.play.ht/api/v2/cloned-voices/instant
  Headers: {
  'X-USER-ID': 'SoA1fGJzuFYisSSi9nhcg0hE6GG3',
  AUTHORIZATION: 'ak-3b88527...',
  accept: 'application/json'
}
  FormData entries: [
  [ 'voice_name', 'fc4b1428-3b49-40cd-923a-edc38a6d9b34' ],
  [
    'sample_file',
    'File(voice_fc4b1428-3b49-40cd-923a-edc38a6d9b34_User_1749439581525.wav, 1920044b, audio/wav)'
  ]
]
⏳ Sending request now...
🐚 Using curl subprocess (axios and fetch both hang indefinitely)...
🐚 Executing curl command...
📋 Command preview: curl --request POST --url https://api.play.ht/api/v2/cloned-voices/instant --header 'AUTHORIZATION: ak-3b88527...' --header 'X-USER-ID: SoA1fGJzuFYisSSi9nhcg0hE6GG3' --header 'accept: application/json' --form 'sample_file=@/Users/benjaminjohnston/workspace/phriend-demo/audio_exports/voice_fc4b1428-3b49-40cd-923a-edc38a6d9b34_User_1749439581525.wav;type=audio/wav' --form 'voice_name=fc4b1428-3b49-40cd-923a-edc38a6d9b34' --max-time 60
🔥 WEBHOOK RECEIVED: 2025-06-09T03:26:23.134Z
🔥 Raw payload keys: [ 'message' ]
🔥 Extracted event type: conversation-update
🔥 NODE_ENV: development
🔥 isDevelopment: true
🎯 Vapi Webhook Event: {
  type: 'conversation-update',
  callId: 'fc4b1428-3b49-40cd-923a-edc38a6d9b34',
  timestamp: '2025-06-09T03:26:23.134Z'
}
💬 Conversation update: { messageCount: 4, timestamp: '2025-06-09T03:26:23.134Z' }
📝 Added assistant message to transcript: Curly. What a beautiful name.
📊 Transcript progress: 10 messages collected for Future Self
 POST /api/vapi/webhook 200 in 23ms
🎵 Received 1600 audio chunks, latest size: 3840 bytes, total: 6140248 bytes
🎵 Received 1700 audio chunks, latest size: 3840 bytes, total: 6524248 bytes
🎉 Curl subprocess completed successfully!
⚡ PlayHT request completed in 4049ms (4s)
⚠️ Curl stderr:   % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
  0     0    0     0    0     0      0      0 -- 64 1875k    0     0   64 1215k      0  1500k  0100 1875k    0     0  100 1875k      0   847k  0100 1875k    0     0  100 1875k      0   583k  0100 1875k  100   215  100 1875k     53   467k  0100 1875k  100   215  100 1875k     53   466k  0:00:04  0:00:04 --:--:--  466k

🎉 Curl stdout: {"id":"s3://voice-cloning-zero-shot/d633fd1b-57ae-42eb-812b-9d87e847ed25/fc4b1428-3b49-40cd-923a-edc38a6d9b34/manifest.json","name":"fc4b1428-3b49-40cd-923a-edc38a6d9b34","type":"instant","voice_engine":"PlayHT2.0"}
🎉 PlayHT Response Data: {
  "id": "s3://voice-cloning-zero-shot/d633fd1b-57ae-42eb-812b-9d87e847ed25/fc4b1428-3b49-40cd-923a-edc38a6d9b34/manifest.json",
  "name": "fc4b1428-3b49-40cd-923a-edc38a6d9b34",
  "type": "instant",
  "voice_engine": "PlayHT2.0"
}
✅ Real-time voice clone created successfully: s3://voice-cloning-zero-shot/d633fd1b-57ae-42eb-812b-9d87e847ed25/fc4b1428-3b49-40cd-923a-edc38a6d9b34/manifest.json
 POST /api/playht/clone-voice-realtime 200 in 4180ms
✅ Real-time voice cloning completed: s3://voice-cloning-zero-shot/d633fd1b-57ae-42eb-812b-9d87e847ed25/fc4b1428-3b49-40cd-923a-edc38a6d9b34/manifest.json
🎭 Voice clone ready! Creating Future Self assistant immediately...
🎭 Creating Future Self assistant...
📊 Session state: voiceClone=true, transcripts=10
🔮 Creating Future Self assistant with: {
  sessionId: 'fc4b1428-3b49-40cd-923a-edc38a6d9b34',
  voiceId: 's3://voice-cloning-zero-shot/d633fd1b-57ae-42eb-812b-9d87e847ed25/fc4b1428-3b49-40cd-923a-edc38a6d9b34/manifest.json',
  transcriptCount: 10,
  userName: 'Curly'
}
🎭 Attempting to use cloned PlayHT voice: s3://voice-cloning-zero-shot/d633fd1b-57ae-42eb-812b-9d87e847ed25/fc4b1428-3b49-40cd-923a-edc38a6d9b34/manifest.json
🎭 Creating Future Self assistant with config: {
  name: 'Future Self - Curly',
  voiceProvider: 'playht',
  voiceId: 's3://voice-cloning-zero-shot/d633fd1b-57ae-42eb-812b-9d87e847ed25/fc4b1428-3b49-40cd-923a-edc38a6d9b34/manifest.json',
  transcriptLength: 10,
  promptLength: 3364
}
❌ Vapi API error: 400 {"message":"Voice s3://voice-cloning-zero-shot/d633fd1b-57ae-42eb-812b-9d87e847ed25/fc4b1428-3b49-40cd-923a-edc38a6d9b34/manifest.json not found for provider playht","error":"Bad Request","statusCode":400}
❌ Failed to create Future Self assistant: Error: Vapi API error: 400 Bad Request
    at createFutureSelfAssistant (src/app/lib/vapiHelpers.ts:137:12)
    at async createFutureSelfForSession (src/app/api/vapi/webhook/route.ts:450:24)
    at async triggerFutureSelfCreation (src/app/api/vapi/webhook/route.ts:425:4)
    at async VapiAudioCapture.<anonymous> (src/app/api/vapi/webhook/route.ts:304:16)
  135 |       }
  136 |       
> 137 |       throw new Error(`Vapi API error: ${response.status} ${response.statusText}`);
      |            ^
  138 |     }
  139 |
  140 |     const assistantData = await response.json();
❌ Failed to create Future Self assistant: Error: Vapi API error: 400 Bad Request
    at createFutureSelfAssistant (src/app/lib/vapiHelpers.ts:137:12)
    at async createFutureSelfForSession (src/app/api/vapi/webhook/route.ts:450:24)
    at async triggerFutureSelfCreation (src/app/api/vapi/webhook/route.ts:425:4)
    at async VapiAudioCapture.<anonymous> (src/app/api/vapi/webhook/route.ts:304:16)
  135 |       }
  136 |       
> 137 |       throw new Error(`Vapi API error: ${response.status} ${response.statusText}`);
      |            ^
  138 |     }
  139 |
  140 |     const assistantData = await response.json();
🔄 Call state updated for fc4b1428-3b49-40cd-923a-edc38a6d9b34: interruption_delivered
✅ Voice clone now ready, proceeding with Future Self creation...
🔮 Creating Future Self assistant with: {
  sessionId: 'fc4b1428-3b49-40cd-923a-edc38a6d9b34',
  voiceId: 's3://voice-cloning-zero-shot/d633fd1b-57ae-42eb-812b-9d87e847ed25/fc4b1428-3b49-40cd-923a-edc38a6d9b34/manifest.json',
  transcriptCount: 10,
  userName: 'Curly'
}
🎭 Attempting to use cloned PlayHT voice: s3://voice-cloning-zero-shot/d633fd1b-57ae-42eb-812b-9d87e847ed25/fc4b1428-3b49-40cd-923a-edc38a6d9b34/manifest.json
🎭 Creating Future Self assistant with config: {
  name: 'Future Self - Curly',
  voiceProvider: 'playht',
  voiceId: 's3://voice-cloning-zero-shot/d633fd1b-57ae-42eb-812b-9d87e847ed25/fc4b1428-3b49-40cd-923a-edc38a6d9b34/manifest.json',
  transcriptLength: 10,
  promptLength: 3364
}
❌ Vapi API error: 400 {"message":"Voice s3://voice-cloning-zero-shot/d633fd1b-57ae-42eb-812b-9d87e847ed25/fc4b1428-3b49-40cd-923a-edc38a6d9b34/manifest.json not found for provider playht","error":"Bad Request","statusCode":400}
❌ Failed to create Future Self assistant: Error: Vapi API error: 400 Bad Request
    at createFutureSelfAssistant (src/app/lib/vapiHelpers.ts:137:12)
    at async createFutureSelfForSession (src/app/api/vapi/webhook/route.ts:450:24)
    at async Timeout.<anonymous> (src/app/api/vapi/webhook/route.ts:411:10)
  135 |       }
  136 |       
> 137 |       throw new Error(`Vapi API error: ${response.status} ${response.statusText}`);
      |            ^
  138 |     }
  139 |
  140 |     const assistantData = await response.json();
❌ Failed to create Future Self assistant: Error: Vapi API error: 400 Bad Request
    at createFutureSelfAssistant (src/app/lib/vapiHelpers.ts:137:12)
    at async createFutureSelfForSession (src/app/api/vapi/webhook/route.ts:450:24)
    at async Timeout.<anonymous> (src/app/api/vapi/webhook/route.ts:411:10)
  135 |       }
  136 |       
> 137 |       throw new Error(`Vapi API error: ${response.status} ${response.statusText}`);
      |            ^
  138 |     }
  139 |
  140 |     const assistantData = await response.json();
🔥 WEBHOOK RECEIVED: 2025-06-09T03:26:26.715Z
🔥 Raw payload keys: [ 'message' ]
🔥 Extracted event type: conversation-update
🔥 NODE_ENV: development
🔥 isDevelopment: true
🎯 Vapi Webhook Event: {
  type: 'conversation-update',
  callId: 'fc4b1428-3b49-40cd-923a-edc38a6d9b34',
  timestamp: '2025-06-09T03:26:26.715Z'
}
💬 Conversation update: { messageCount: 4, timestamp: '2025-06-09T03:26:26.716Z' }
📝 Added assistant message to transcript: Curly. What a beautiful name. I can feel you've been carrying something heavy for a long time.
 POST /api/vapi/webhook 200 in 20ms
🎵 Received 1800 audio chunks, latest size: 3840 bytes, total: 6908248 bytes
🔥 WEBHOOK RECEIVED: 2025-06-09T03:26:29.138Z
🔥 Raw payload keys: [ 'message' ]
🔥 Extracted event type: conversation-update
🔥 NODE_ENV: development
🔥 isDevelopment: true
🎯 Vapi Webhook Event: {
  type: 'conversation-update',
  callId: 'fc4b1428-3b49-40cd-923a-edc38a6d9b34',
  timestamp: '2025-06-09T03:26:29.138Z'
}
💬 Conversation update: { messageCount: 4, timestamp: '2025-06-09T03:26:29.138Z' }
📝 Added assistant message to transcript: Curly. What a beautiful name. I can feel you've been carrying something heavy for a long time. Like 
 POST /api/vapi/webhook 200 in 18ms
🎵 Received 1900 audio chunks, latest size: 3840 bytes, total: 7292248 bytes
🔄 Call state updated for fc4b1428-3b49-40cd-923a-edc38a6d9b34: ready_for_future_call
🎵 Received 2000 audio chunks, latest size: 3840 bytes, total: 7676248 bytes
🎵 Audio progress: 2000 chunks, 7676248 bytes 
🎵 Received 2100 audio chunks, latest size: 3840 bytes, total: 8060248 bytes
🔥 WEBHOOK RECEIVED: 2025-06-09T03:26:34.101Z
🔥 Raw payload keys: [ 'message' ]
🔥 Extracted event type: conversation-update
🔥 NODE_ENV: development
🔥 isDevelopment: true
🎯 Vapi Webhook Event: {
  type: 'conversation-update',
  callId: 'fc4b1428-3b49-40cd-923a-edc38a6d9b34',
  timestamp: '2025-06-09T03:26:34.102Z'
}
💬 Conversation update: { messageCount: 4, timestamp: '2025-06-09T03:26:34.102Z' }
📝 Added assistant message to transcript: Curly. What a beautiful name. I can feel you've been carrying something heavy for a long time. Like 
 POST /api/vapi/webhook 200 in 15ms
🔥 WEBHOOK RECEIVED: 2025-06-09T03:26:34.580Z
🔥 Raw payload keys: [ 'message' ]
🔥 Extracted event type: conversation-update
🔥 NODE_ENV: development
🔥 isDevelopment: true
🎯 Vapi Webhook Event: {
  type: 'conversation-update',
  callId: 'fc4b1428-3b49-40cd-923a-edc38a6d9b34',
  timestamp: '2025-06-09T03:26:34.580Z'
}
💬 Conversation update: { messageCount: 4, timestamp: '2025-06-09T03:26:34.580Z' }
📝 Added assistant message to transcript: Curly. What a beautiful name. I can feel you've been carrying something heavy for a long time. Like 
 POST /api/vapi/webhook 200 in 16ms
🔥 WEBHOOK RECEIVED: 2025-06-09T03:26:34.674Z
🔥 Raw payload keys: [ 'message' ]
🔥 Extracted event type: speech-update
🔥 NODE_ENV: development
🔥 isDevelopment: true
🎯 Vapi Webhook Event: {
  type: 'speech-update',
  callId: 'fc4b1428-3b49-40cd-923a-edc38a6d9b34',
  timestamp: '2025-06-09T03:26:34.675Z'
}
🎤 Speech update: {
  role: 'assistant',
  status: 'stopped',
  timestamp: '2025-06-09T03:26:34.675Z'
}
 POST /api/vapi/webhook 200 in 16ms
🎵 Received 2200 audio chunks, latest size: 3840 bytes, total: 8444248 bytes
🎵 Received 2300 audio chunks, latest size: 3840 bytes, total: 8828248 bytes
🔥 WEBHOOK RECEIVED: 2025-06-09T03:26:39.014Z
🔥 Raw payload keys: [ 'message' ]
🔥 Extracted event type: speech-update
🔥 NODE_ENV: development
🔥 isDevelopment: true
🎯 Vapi Webhook Event: {
  type: 'speech-update',
  callId: 'fc4b1428-3b49-40cd-923a-edc38a6d9b34',
  timestamp: '2025-06-09T03:26:39.014Z'
}
🎤 Speech update: {
  role: 'user',
  status: 'started',
  timestamp: '2025-06-09T03:26:39.015Z'
}
 POST /api/vapi/webhook 200 in 23ms
🎵 Received 2400 audio chunks, latest size: 3840 bytes, total: 9212248 bytes
🔥 WEBHOOK RECEIVED: 2025-06-09T03:26:39.908Z
🔥 Raw payload keys: [ 'message' ]
🔥 Extracted event type: speech-update
🔥 NODE_ENV: development
🔥 isDevelopment: true
🎯 Vapi Webhook Event: {
  type: 'speech-update',
  callId: 'fc4b1428-3b49-40cd-923a-edc38a6d9b34',
  timestamp: '2025-06-09T03:26:39.909Z'
}
🎤 Speech update: {
  role: 'user',
  status: 'stopped',
  timestamp: '2025-06-09T03:26:39.909Z'
}
 POST /api/vapi/webhook 200 in 17ms
🔥 WEBHOOK RECEIVED: 2025-06-09T03:26:40.315Z
🔥 Raw payload keys: [ 'message' ]
🔥 Extracted event type: conversation-update
🔥 NODE_ENV: development
🔥 isDevelopment: true
🎯 Vapi Webhook Event: {
  type: 'conversation-update',
  callId: 'fc4b1428-3b49-40cd-923a-edc38a6d9b34',
  timestamp: '2025-06-09T03:26:40.315Z'
}
💬 Conversation update: { messageCount: 5, timestamp: '2025-06-09T03:26:40.315Z' }
📝 Added user message to transcript: Things like
📊 Transcript progress: 15 messages collected for Future Self
 POST /api/vapi/webhook 200 in 18ms
🎵 Received 2500 audio chunks, latest size: 3840 bytes, total: 9596248 bytes
🎵 Audio progress: 2500 chunks, 9596248 bytes 
🔥 WEBHOOK RECEIVED: 2025-06-09T03:26:41.983Z
🔥 Raw payload keys: [ 'message' ]
🔥 Extracted event type: speech-update
🔥 NODE_ENV: development
🔥 isDevelopment: true
🎯 Vapi Webhook Event: {
  type: 'speech-update',
  callId: 'fc4b1428-3b49-40cd-923a-edc38a6d9b34',
  timestamp: '2025-06-09T03:26:41.985Z'
}
🎤 Speech update: {
  role: 'user',
  status: 'started',
  timestamp: '2025-06-09T03:26:41.985Z'
}
 POST /api/vapi/webhook 200 in 59ms
🔥 WEBHOOK RECEIVED: 2025-06-09T03:26:43.179Z
🔥 Raw payload keys: [ 'message' ]
🔥 Extracted event type: speech-update
🔥 NODE_ENV: development
🔥 isDevelopment: true
🎯 Vapi Webhook Event: {
  type: 'speech-update',
  callId: 'fc4b1428-3b49-40cd-923a-edc38a6d9b34',
  timestamp: '2025-06-09T03:26:43.179Z'
}
🎤 Speech update: {
  role: 'user',
  status: 'stopped',
  timestamp: '2025-06-09T03:26:43.179Z'
}
 POST /api/vapi/webhook 200 in 30ms
🎵 Received 2600 audio chunks, latest size: 3840 bytes, total: 9980248 bytes
🔥 WEBHOOK RECEIVED: 2025-06-09T03:26:44.588Z
🔥 Raw payload keys: [ 'message' ]
🔥 Extracted event type: speech-update
🔥 NODE_ENV: development
🔥 isDevelopment: true
🎯 Vapi Webhook Event: {
  type: 'speech-update',
  callId: 'fc4b1428-3b49-40cd-923a-edc38a6d9b34',
  timestamp: '2025-06-09T03:26:44.589Z'
}
🎤 Speech update: {
  role: 'user',
  status: 'started',
  timestamp: '2025-06-09T03:26:44.589Z'
}
 POST /api/vapi/webhook 200 in 40ms
🔥 WEBHOOK RECEIVED: 2025-06-09T03:26:45.351Z
🔥 Raw payload keys: [ 'message' ]
🔥 Extracted event type: conversation-update
🔥 NODE_ENV: development
🔥 isDevelopment: true
🎯 Vapi Webhook Event: {
  type: 'conversation-update',
  callId: 'fc4b1428-3b49-40cd-923a-edc38a6d9b34',
  timestamp: '2025-06-09T03:26:45.351Z'
}
💬 Conversation update: { messageCount: 5, timestamp: '2025-06-09T03:26:45.351Z' }
📝 Added user message to transcript: Things like using curl instead of node j s.
 POST /api/vapi/webhook 200 in 37ms
🎵 Received 2700 audio chunks, latest size: 3840 bytes, total: 10364248 bytes
🔥 WEBHOOK RECEIVED: 2025-06-09T03:26:45.482Z
🔥 Raw payload keys: [ 'message' ]
🔥 Extracted event type: speech-update
🔥 NODE_ENV: development
🔥 isDevelopment: true
🎯 Vapi Webhook Event: {
  type: 'speech-update',
  callId: 'fc4b1428-3b49-40cd-923a-edc38a6d9b34',
  timestamp: '2025-06-09T03:26:45.482Z'
}
🎤 Speech update: {
  role: 'user',
  status: 'stopped',
  timestamp: '2025-06-09T03:26:45.482Z'
}
 POST /api/vapi/webhook 200 in 32ms
🔄 Call state updated for fc4b1428-3b49-40cd-923a-edc38a6d9b34: preparing_interruption
🔥 WEBHOOK RECEIVED: 2025-06-09T03:26:46.715Z
🔥 Raw payload keys: [ 'message' ]
🔥 Extracted event type: speech-update
🔥 NODE_ENV: development
🔥 isDevelopment: true
🎯 Vapi Webhook Event: {
  type: 'speech-update',
  callId: 'fc4b1428-3b49-40cd-923a-edc38a6d9b34',
  timestamp: '2025-06-09T03:26:46.716Z'
}
🎤 Speech update: {
  role: 'assistant',
  status: 'started',
  timestamp: '2025-06-09T03:26:46.716Z'
}
 POST /api/vapi/webhook 200 in 39ms
🔥 WEBHOOK RECEIVED: 2025-06-09T03:26:46.797Z
🔥 Raw payload keys: [ 'message' ]
🔥 Extracted event type: speech-update
🔥 NODE_ENV: development
🔥 isDevelopment: true
🎯 Vapi Webhook Event: {
  type: 'speech-update',
  callId: 'fc4b1428-3b49-40cd-923a-edc38a6d9b34',
  timestamp: '2025-06-09T03:26:46.797Z'
}
🎤 Speech update: {
  role: 'assistant',
  status: 'stopped',
  timestamp: '2025-06-09T03:26:46.797Z'
}
 POST /api/vapi/webhook 200 in 21ms
🔥 WEBHOOK RECEIVED: 2025-06-09T03:26:46.845Z
🔥 Raw payload keys: [ 'message' ]
🔥 Extracted event type: speech-update
🔥 NODE_ENV: development
🔥 isDevelopment: true
🎯 Vapi Webhook Event: {
  type: 'speech-update',
  callId: 'fc4b1428-3b49-40cd-923a-edc38a6d9b34',
  timestamp: '2025-06-09T03:26:46.845Z'
}
🎤 Speech update: {
  role: 'assistant',
  status: 'started',
  timestamp: '2025-06-09T03:26:46.845Z'
}
 POST /api/vapi/webhook 200 in 15ms
🎵 Received 2800 audio chunks, latest size: 3840 bytes, total: 10748248 bytes
🔥 WEBHOOK RECEIVED: 2025-06-09T03:26:47.675Z
🔥 Raw payload keys: [ 'message' ]
🔥 Extracted event type: speech-update
🔥 NODE_ENV: development
🔥 isDevelopment: true
🎯 Vapi Webhook Event: {
  type: 'speech-update',
  callId: 'fc4b1428-3b49-40cd-923a-edc38a6d9b34',
  timestamp: '2025-06-09T03:26:47.676Z'
}
🎤 Speech update: {
  role: 'user',
  status: 'started',
  timestamp: '2025-06-09T03:26:47.676Z'
}
 POST /api/vapi/webhook 200 in 27ms
🔥 WEBHOOK RECEIVED: 2025-06-09T03:26:47.679Z
🔥 Raw payload keys: [ 'message' ]
🔥 Extracted event type: user-interrupted
🔥 NODE_ENV: development
🔥 isDevelopment: true
🎯 Vapi Webhook Event: {
  type: 'user-interrupted',
  callId: 'fc4b1428-3b49-40cd-923a-edc38a6d9b34',
  timestamp: '2025-06-09T03:26:47.679Z'
}
⚡ User interrupted! (Potential emotional moment) { timestamp: '2025-06-09T03:26:47.679Z' }
 POST /api/vapi/webhook 200 in 29ms
🔥 WEBHOOK RECEIVED: 2025-06-09T03:26:47.707Z
🔥 Raw payload keys: [ 'message' ]
🔥 Extracted event type: speech-update
🔥 NODE_ENV: development
🔥 isDevelopment: true
🎯 Vapi Webhook Event: {
  type: 'speech-update',
  callId: 'fc4b1428-3b49-40cd-923a-edc38a6d9b34',
  timestamp: '2025-06-09T03:26:47.708Z'
}
🎤 Speech update: {
  role: 'assistant',
  status: 'stopped',
  timestamp: '2025-06-09T03:26:47.708Z'
}
 POST /api/vapi/webhook 200 in 14ms
🔥 WEBHOOK RECEIVED: 2025-06-09T03:26:48.028Z
🔥 Raw payload keys: [ 'message' ]
🔥 Extracted event type: conversation-update
🔥 NODE_ENV: development
🔥 isDevelopment: true
🎯 Vapi Webhook Event: {
  type: 'conversation-update',
  callId: 'fc4b1428-3b49-40cd-923a-edc38a6d9b34',
  timestamp: '2025-06-09T03:26:48.028Z'
}
💬 Conversation update: { messageCount: 6, timestamp: '2025-06-09T03:26:48.028Z' }
📝 Added assistant message to transcript: I hear
 POST /api/vapi/webhook 200 in 22ms
🔥 WEBHOOK RECEIVED: 2025-06-09T03:26:48.203Z
🔥 Raw payload keys: [ 'message' ]
🔥 Extracted event type: conversation-update
🔥 NODE_ENV: development
🔥 isDevelopment: true
🎯 Vapi Webhook Event: {
  type: 'conversation-update',
  callId: 'fc4b1428-3b49-40cd-923a-edc38a6d9b34',
  timestamp: '2025-06-09T03:26:48.203Z'
}
💬 Conversation update: { messageCount: 7, timestamp: '2025-06-09T03:26:48.203Z' }
📝 Added user message to transcript: I'm worried.
 POST /api/vapi/webhook 200 in 45ms
🔥 WEBHOOK RECEIVED: 2025-06-09T03:26:48.279Z
🔥 Raw payload keys: [ 'message' ]
🔥 Extracted event type: speech-update
🔥 NODE_ENV: development
🔥 isDevelopment: true
🎯 Vapi Webhook Event: {
  type: 'speech-update',
  callId: 'fc4b1428-3b49-40cd-923a-edc38a6d9b34',
  timestamp: '2025-06-09T03:26:48.280Z'
}
🎤 Speech update: {
  role: 'user',
  status: 'stopped',
  timestamp: '2025-06-09T03:26:48.280Z'
}
 POST /api/vapi/webhook 200 in 21ms
🎵 Received 2900 audio chunks, latest size: 3840 bytes, total: 11132248 bytes
🔥 WEBHOOK RECEIVED: 2025-06-09T03:26:51.114Z
🔥 Raw payload keys: [ 'message' ]
🔥 Extracted event type: speech-update
🔥 NODE_ENV: development
🔥 isDevelopment: true
🎯 Vapi Webhook Event: {
  type: 'speech-update',
  callId: 'fc4b1428-3b49-40cd-923a-edc38a6d9b34',
  timestamp: '2025-06-09T03:26:51.115Z'
}
🎤 Speech update: {
  role: 'assistant',
  status: 'started',
  timestamp: '2025-06-09T03:26:51.115Z'
}
 POST /api/vapi/webhook 200 in 38ms
🔥 WEBHOOK RECEIVED: 2025-06-09T03:26:51.169Z
🔥 Raw payload keys: [ 'message' ]
🔥 Extracted event type: speech-update
🔥 NODE_ENV: development
🔥 isDevelopment: true
🎯 Vapi Webhook Event: {
  type: 'speech-update',
  callId: 'fc4b1428-3b49-40cd-923a-edc38a6d9b34',
  timestamp: '2025-06-09T03:26:51.169Z'
}
🎤 Speech update: {
  role: 'assistant',
  status: 'stopped',
  timestamp: '2025-06-09T03:26:51.169Z'
}
 POST /api/vapi/webhook 200 in 21ms
🔥 WEBHOOK RECEIVED: 2025-06-09T03:26:51.243Z
🔥 Raw payload keys: [ 'message' ]
🔥 Extracted event type: speech-update
🔥 NODE_ENV: development
🔥 isDevelopment: true
🎯 Vapi Webhook Event: {
  type: 'speech-update',
  callId: 'fc4b1428-3b49-40cd-923a-edc38a6d9b34',
  timestamp: '2025-06-09T03:26:51.243Z'
}
🎤 Speech update: {
  role: 'assistant',
  status: 'started',
  timestamp: '2025-06-09T03:26:51.243Z'
}
 POST /api/vapi/webhook 200 in 38ms
🎵 Received 3000 audio chunks, latest size: 3840 bytes, total: 11516248 bytes
🎵 Audio progress: 3000 chunks, 11516248 bytes 
🎵 Received 3100 audio chunks, latest size: 3840 bytes, total: 11900248 bytes
🔥 WEBHOOK RECEIVED: 2025-06-09T03:26:53.744Z
🔥 Raw payload keys: [ 'message' ]
🔥 Extracted event type: conversation-update
🔥 NODE_ENV: development
🔥 isDevelopment: true
🎯 Vapi Webhook Event: {
  type: 'conversation-update',
  callId: 'fc4b1428-3b49-40cd-923a-edc38a6d9b34',
  timestamp: '2025-06-09T03:26:53.744Z'
}
💬 Conversation update: { messageCount: 8, timestamp: '2025-06-09T03:26:53.744Z' }
📝 Added assistant message to transcript: I hear the worry in your voice curly.
 POST /api/vapi/webhook 200 in 27ms
🎵 Received 3200 audio chunks, latest size: 3840 bytes, total: 12284248 bytes
🔴 WebSocket closed. Code: 1005, Reason: 
📊 Final stats: 3280 chunks, 12591448 bytes
🔴 Audio capture ended: {
  callId: 'fc4b1428-3b49-40cd-923a-edc38a6d9b34',
  chunks: 3280,
  bytes: 12591448
}
🔄 Attempting reconnection 1/3 in 1000ms...
🎧 Connecting to WebSocket for call fc4b1428-3b49-40cd-923a-edc38a6d9b34...
✅ WebSocket connected!
🔗 WebSocket connection established successfully 
📦 Skipping small chunk (likely metadata): 88 bytes
🔥 WEBHOOK RECEIVED: 2025-06-09T03:26:59.673Z
🔥 Raw payload keys: [ 'message' ]
🔥 Extracted event type: status-update
🔥 NODE_ENV: development
🔥 isDevelopment: true
🎯 Vapi Webhook Event: {
  type: 'status-update',
  callId: 'fc4b1428-3b49-40cd-923a-edc38a6d9b34',
  timestamp: '2025-06-09T03:26:59.674Z'
}
📊 Status update: ended
 POST /api/vapi/webhook 200 in 32ms
🔥 WEBHOOK RECEIVED: 2025-06-09T03:27:01.866Z
🔥 Raw payload keys: [ 'message' ]
🔥 Extracted event type: end-of-call-report
🔥 NODE_ENV: development
🔥 isDevelopment: true
🎯 Vapi Webhook Event: {
  type: 'end-of-call-report',
  callId: 'fc4b1428-3b49-40cd-923a-edc38a6d9b34',
  timestamp: '2025-06-09T03:27:01.868Z'
}
🔴 Call ended! (end-of-call-report) 
📞 Call ended { callId: 'fc4b1428-3b49-40cd-923a-edc38a6d9b34' }
🧹 Cleaning up audio capture for call: fc4b1428-3b49-40cd-923a-edc38a6d9b34
✅ Audio capture cleaned up successfully 
🔴 Call ended, final session state: {
  sessionId: 'fc4b1428-3b49-40cd-923a-edc38a6d9b34',
  transcriptCount: 19,
  userName: 'Curly',
  voiceCloneCompleted: true,
  futureSelfCreated: false,
  assistantId: undefined
}
🎭 Call ended - attempting final Future Self creation...
🔮 Creating Future Self assistant with: {
  sessionId: 'fc4b1428-3b49-40cd-923a-edc38a6d9b34',
  voiceId: 's3://voice-cloning-zero-shot/d633fd1b-57ae-42eb-812b-9d87e847ed25/fc4b1428-3b49-40cd-923a-edc38a6d9b34/manifest.json',
  transcriptCount: 19,
  userName: 'Curly'
}
🎭 Attempting to use cloned PlayHT voice: s3://voice-cloning-zero-shot/d633fd1b-57ae-42eb-812b-9d87e847ed25/fc4b1428-3b49-40cd-923a-edc38a6d9b34/manifest.json
🎭 Creating Future Self assistant with config: {
  name: 'Future Self - Curly',
  voiceProvider: 'playht',
  voiceId: 's3://voice-cloning-zero-shot/d633fd1b-57ae-42eb-812b-9d87e847ed25/fc4b1428-3b49-40cd-923a-edc38a6d9b34/manifest.json',
  transcriptLength: 19,
  promptLength: 4266
}
🔴 WebSocket closed. Code: 1000, Reason: Normal closure
📊 Final stats: 3281 chunks, 12591536 bytes
🔴 Audio capture ended: {
  callId: 'fc4b1428-3b49-40cd-923a-edc38a6d9b34',
  chunks: 3281,
  bytes: 12591536
}
❌ Vapi API error: 400 {"message":"Voice s3://voice-cloning-zero-shot/d633fd1b-57ae-42eb-812b-9d87e847ed25/fc4b1428-3b49-40cd-923a-edc38a6d9b34/manifest.json not found for provider playht","error":"Bad Request","statusCode":400}
❌ Failed to create Future Self assistant: Error: Vapi API error: 400 Bad Request
    at createFutureSelfAssistant (src/app/lib/vapiHelpers.ts:137:12)
    at async createFutureSelfForSession (src/app/api/vapi/webhook/route.ts:450:24)
    at async handleCallEnded (src/app/api/vapi/webhook/route.ts:616:4)
    at async POST (src/app/api/vapi/webhook/route.ts:172:18)
  135 |       }
  136 |       
> 137 |       throw new Error(`Vapi API error: ${response.status} ${response.statusText}`);
      |            ^
  138 |     }
  139 |
  140 |     const assistantData = await response.json();
❌ Failed to create Future Self assistant: Error: Vapi API error: 400 Bad Request
    at createFutureSelfAssistant (src/app/lib/vapiHelpers.ts:137:12)
    at async createFutureSelfForSession (src/app/api/vapi/webhook/route.ts:450:24)
    at async handleCallEnded (src/app/api/vapi/webhook/route.ts:616:4)
    at async POST (src/app/api/vapi/webhook/route.ts:172:18)
  135 |       }
  136 |       
> 137 |       throw new Error(`Vapi API error: ${response.status} ${response.statusText}`);
      |            ^
  138 |     }
  139 |
  140 |     const assistantData = await response.json();
 POST /api/vapi/webhook 200 in 310ms
